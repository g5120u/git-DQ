2025-12-29 é–‹ç™¼æ›´æ–°ç´€éŒ„ / Development Update

ä¸­æ–‡ï¼ˆç¹é«”ï¼‰
------------
- ä»Šæ—¥é‡é»ï¼š
  - å®Œæˆã€Œå»ºç«‹æ–°æ‘èŠï¼ˆgit initï¼‰ã€çš„ç¢ºèªå°è©±ï¼Œå…§å«ç™½è©±èªªæ˜èˆ‡å®‰å…¨æé†’ï¼ˆæ”¾ç½®æ–¼ UI ä¸­é–“ï¼Œæä¾›å–æ¶ˆ/ç¢ºå®šæŒ‰éˆ•ï¼‰ã€‚  
  - ç¾åŒ–ä¸¦ä¸Šç§»ã€Œå†’éšªä¹‹æ›¸ã€ä»‹é¢ï¼Œä½¿ä¸‹æ–¹åˆ†æ”¯å»ºç«‹è¼¸å…¥æ¬„å¯è¦‹ã€‚  
  - åœ¨ `ç•¶å‰æ‘èŠç‹€æ…‹` çš„ quick-action æ–°å¢ã€ŒğŸ¡ æ‘èŠæ—¥å¸¸ã€å¿«æ·æŒ‰éˆ•ï¼Œä¸¦å¯¦ä½œæ‘èŠæ¨¡æ“¬å™¨é¢æ¿ï¼ˆè‡ªå‹•å¾ªç’°ã€æ—¥èªŒã€é–‹å§‹/åœæ­¢ã€æ¸…é™¤ã€é—œé–‰ï¼‰ã€‚  
  - èª¿æ•´ã€Œå‹•æ…‹æ¨¡å¼ã€æŒ‰éˆ•ä½ç½®ä»¥é¿å…èˆ‡å½ˆçª—æˆ–é€šçŸ¥é‡ç–Šã€‚  
  - ç¾åŒ–æ‘èŠæ¨¡æ“¬å™¨ç•Œé¢ï¼šæŒ‰éˆ•æ”¹ç‚ºæ©«å‘æ’åˆ—ã€æ—¥èªŒå€åŸŸæ”¹æˆåˆ—è¡¨æ¨£å¼ã€æ™‚é–“èˆ‡å…§å®¹åˆ†åˆ—ã€é‡‘å¹£é¡¯ç¤ºæ›´é†’ç›®ã€‚  
  - ä¿®æ­£å¤šè™• UI æ’ç‰ˆé®æ“‹å•é¡Œèˆ‡ image fallback å•é¡Œï¼ˆé é˜² F12 ç´…å­—éŒ¯èª¤ï¼‰ã€‚

- å½±éŸ¿æª”æ¡ˆï¼ˆéƒ¨åˆ†ï¼‰ï¼š
  - `renderer/App.jsx`ï¼ˆä¸»è¦ UI èˆ‡æ‘èŠæ¨¡æ“¬å™¨æ”¹å‹•ï¼‰  
  - `renderer/SaveSlotScreen.jsx`ï¼ˆå­˜æª”æ§½æ’åˆ—èˆ‡åˆ†é ï¼‰  
  - `renderer/BattleScreen.jsx`ï¼ˆæˆ°é¬¥ç•«é¢å¸¸é§èˆ‡æ‰‹å‹•é—œé–‰ï¼‰  
  - `dq-engine.js`ã€`main.js`ã€`preload.cjs`ï¼ˆgit èˆ‡ world ç®¡ç†ç›¸é—œ IPCï¼‰  

- å¾ŒçºŒå¾…è¾¦ï¼ˆå„ªå…ˆç´šï¼‰ï¼š
  1. ç²¾éˆé€å¹€å‹•ç•«æ•´åˆï¼ˆprincess / boss spriteï¼‰ï¼Œå°‡ git diff è½‰ç‚ºæˆ°é¬¥åŠ‡æƒ…ä¸¦è§¸ç™¼å‹•ç•«ï¼ˆéœ€è¦ç´ æï¼‰ã€‚  
  2. æˆ°é¬¥æ•¸å€¼èˆ‡å‹•ç•«å¼·åŒ–ï¼šé¡¯ç¤ºå‚·å®³æµ®å‹•ã€æ‰è½ç‰©è¦–è¦ºåŒ–ã€åŒæ­¥ worldStateã€‚  
  3. å°‡ Debug æŒ‰éˆ•æ”¹ç‚ºé–‹ç™¼æ¨¡å¼å°ˆç”¨ï¼ˆæˆ–åŠ å…¥è¨­å®šé–‹é—œï¼‰ã€‚

English
-------
- Today highlights:
  - Added a confirm dialog for "Create New Village (git init)" with plain-language explanations and safety notes (centered UI dialog with Cancel/Confirm).  
  - Moved and polished the "Adventure Book" UI so the branch creation input is visible.  
  - Added a quick "Village Simulator" button in the Current Village panel; implemented the simulator panel (auto-loop, log, start/stop, clear, close).  
  - Repositioned the "Dynamic Mode" button to prevent overlap with popups/notifications.  
  - Improved the village simulator visuals: horizontal action buttons, list-style log with separated time/content, highlighted gold display.  
  - Fixed several UI overlap issues and image fallback to reduce console errors.

- Affected files (partial):
  - `renderer/App.jsx` (main UI and village simulator changes)  
  - `renderer/SaveSlotScreen.jsx` (save slots & pagination)  
  - `renderer/BattleScreen.jsx` (battle persistence & manual close)  
  - `dq-engine.js`, `main.js`, `preload.cjs` (git/world IPC)

- Next tasks (priority):
  1. Sprite frame animation integration (princess / boss) and convert git diffs to battle scripts (need art assets).  
  2. Enhance battle numeric/visual feedback (damage popups, loot UI, sync to worldState).  
  3. Make Debug button dev-only (or configurable).

---  
Author: git-DQ dev  
Date: 2025-12-29


